/* ============================================================
   Kotkot Design System — Canonical Token Layer
   Next.js 16 + Tailwind CSS v4
   Enforced per: DESIGN_SYSTEM.md, COMPONENT_GUIDELINES.md,
                 TEMPLATE_RULES.md, UX_PRINCIPLES.md
   ============================================================ */

@import "tailwindcss";

/* --- Fonts are loaded via next/font/google in layout.tsx --- */

/* ============================================================
   Tailwind v4 — Theme Registration
   All custom design tokens live here so Tailwind utilities work.
   ============================================================ */

@theme inline {
  /* --- Font families --------------------------------------- */
  --font-heading: "DM Sans", "Plus Jakarta Sans", ui-sans-serif, system-ui, sans-serif;
  --font-body: "DM Sans", "Plus Jakarta Sans", ui-sans-serif, system-ui, sans-serif;
  --font-mono: "IBM Plex Mono", "JetBrains Mono", ui-monospace, monospace;

  /* --------------------------------------------------------
     Reference Tokens (raw brand primitives — declared once)
     Components may NEVER consume --ref-* directly.
     -------------------------------------------------------- */

  /* --- Accent (Electric Lime) ------------------------------ */
  --color-accent: #CAFF04;
  --color-accent-hover: #b8e600;
  --color-accent-light: rgba(202, 255, 4, 0.15);

  /* --- Dark Blue (Midnight Navy) -------------------------- */
  --color-dark-blue: #0c1e35;
  --color-dark-blue-light: #151d10;
  --color-dark-blue-lighter: #1f2a18;
  --color-dark-blue-surface: rgba(200, 238, 68, 0.18);
  --color-dark-blue-text: #0c1e35;

  /* --------------------------------------------------------
     Semantic Tokens (DESIGN_SYSTEM.md §3.3)
     Only source of visual values for components/pages.
     -------------------------------------------------------- */

  /* --- Surfaces -------------------------------------------- */
  --color-surface-page: #f8faf5;
  --color-surface-panel: #f3f5ef;
  --color-surface-elevated: #ffffff;
  --color-surface-inverse: #0c1e35;
  --color-surface-hover: #f3f4f6;
  --color-surface-active: #CAFF04;
  --color-surface-sidebar: #0c1e35;
  --color-surface-history: #fafafa;

  /* --- Text ------------------------------------------------ */
  --color-text-primary: #1a1a1a;
  --color-text-secondary: #6b7280;
  --color-text-muted: #9ca3af;
  --color-text-inverse: #ffffff;
  --color-text-on-accent: #0c1e35;
  --color-text-link: #0c1e35;
  --color-text-dark: #0c1e35;

  /* --- Borders --------------------------------------------- */
  --color-border-subtle: #f3f4f6;
  --color-border-default: #e5e7eb;
  --color-border-strong: #d1d5db;
  --color-border-focus: #CAFF04;

  /* --- Actions --------------------------------------------- */
  --color-action-primary-bg: #CAFF04;
  --color-action-primary-fg: #0c1e35;
  --color-action-primary-hover: #b8e600;
  --color-action-secondary-bg: #ffffff;
  --color-action-secondary-fg: #374151;
  --color-action-secondary-hover: #f3f4f6;
  --color-action-tertiary-fg: #6b7280;
  --color-action-tertiary-hover: #f3f4f6;
  /* Dark action (B2B conversion) */
  --color-action-dark-bg: #0c1e35;
  --color-action-dark-fg: #ffffff;
  --color-action-dark-hover: #151d10;

  /* --- Brand utility aliases (bounded use in branded UI motifs) --- */
  --color-brand-whatsapp-700: #075E54;
  --color-brand-whatsapp-500: #128C7E;
  --color-brand-whatsapp-400: #25D366;
  --color-brand-whatsapp-chat: #ECE5DD;
  --color-brand-whatsapp-bubble: #d9fdd3;
  --color-brand-whatsapp-input: #F0F0F0;
  --color-brand-note-bg: #FFF3C4;
  --color-brand-google-blue: #4285F4;
  --color-brand-google-green: #34A853;
  --color-brand-google-yellow: #FBBC05;
  --color-brand-google-red: #EA4335;
  --color-brand-yappy-1: #c8ee44;
  --color-brand-yappy-2: #a8d12f;
  --color-brand-stripe-1: #c8ee44;
  --color-brand-stripe-2: #a8d12f;
  --color-brand-wallet: #7B2BFC;

  /* --- Semantic States -------------------------------------- */
  --color-success-bg: rgba(16, 185, 129, 0.12);
  --color-success-fg: #047857;
  --color-success: #10b981;
  --color-warning-bg: rgba(245, 158, 11, 0.12);
  --color-warning-fg: #b45309;
  --color-warning: #f59e0b;
  --color-danger-bg: rgba(239, 68, 68, 0.12);
  --color-danger-fg: #b91c1c;
  --color-danger: #ef4444;
  --color-info-bg: rgba(200, 238, 68, 0.18);
  --color-info-fg: #1a1a1a;
  --color-notification: #ef4444;

  /* --- Focus ----------------------------------------------- */
  --color-focus-ring: #c8ee44;

  /* --- Charts & Data --------------------------------------- */
  --color-chart-line: #c8ee44;
  --color-chart-dot: #c8ee44;
  --color-chart-grid: #e5e7eb;
  --color-chart-fill: rgba(16, 185, 129, 0.08);

  /* --------------------------------------------------------
     Radius Tokens (DESIGN_SYSTEM.md §6)
     -------------------------------------------------------- */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-pill: 9999px;
  --radius-circle: 50%;

  /* Component aliases */
  --radius-card: 16px;
  --radius-input: 12px;
  --radius-button: 12px;
  --radius-badge: 8px;

  /* --------------------------------------------------------
     Spacing Scale (DESIGN_SYSTEM.md §5)
     8px base grid: 4, 8, 12, 16, 24, 32, 40, 48, 64, 80, 96
     -------------------------------------------------------- */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;
  --space-16: 64px;
  --space-20: 80px;
  --space-24: 96px;

  /* Component spacing */
  --space-card: 24px;
  --space-section-desktop: 96px;
  --space-section-mobile: 64px;

  /* --------------------------------------------------------
     Typography Scale (DESIGN_SYSTEM.md §4.1)
     Only sizes: 12, 14, 16, 20, 24, 32, 40, 56
     -------------------------------------------------------- */
  --type-label-sm: 12px;
  --type-body-sm: 14px;
  --type-body-md: 16px;
  --type-heading-sm: 20px;
  --type-heading-md: 24px;
  --type-heading-lg: 32px;
  --type-display-sm: 40px;
  --type-display-lg: 56px;

  /* --------------------------------------------------------
     Elevation Tokens (DESIGN_SYSTEM.md §7)
     -------------------------------------------------------- */
  --elevation-0: none;
  --elevation-1: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --elevation-2: 0 4px 12px -2px rgba(0, 0, 0, 0.08);
  --elevation-3: 0 12px 32px -4px rgba(0, 0, 0, 0.12);

  /* --------------------------------------------------------
     Transitions
     -------------------------------------------------------- */
  --transition-base: 150ms ease;
  --transition-spring: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* --------------------------------------------------------
     Animations
     -------------------------------------------------------- */
  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes scale-in {
    from {
      opacity: 0;
      transform: scale(0.98);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes draw-line {
    from {
      stroke-dashoffset: 1000;
    }
    to {
      stroke-dashoffset: 0;
    }
  }

  @keyframes cursor-blink {
    0%, 49% {
      opacity: 1;
    }
    50%, 100% {
      opacity: 0;
    }
  }
}

/* ============================================================
   CSS Custom Properties — :root mirror for var() access
   ============================================================ */

:root {
  /* Fonts */
  --font-heading: "DM Sans", "Plus Jakarta Sans", ui-sans-serif, system-ui, sans-serif;
  --font-body: "DM Sans", "Plus Jakarta Sans", ui-sans-serif, system-ui, sans-serif;
  --font-mono: "IBM Plex Mono", "JetBrains Mono", ui-monospace, monospace;

  /* Accent */
  --accent: #CAFF04;
  --accent-hover: #b8e600;
  --accent-light: rgba(202, 255, 4, 0.15);

  /* Dark Blue */
  --dark-blue: #0c1e35;
  --dark-blue-light: #151d10;
  --dark-blue-lighter: #1f2a18;
  --dark-blue-surface: rgba(200, 238, 68, 0.18);

  /* Surfaces */
  --surface-page: #f8faf5;
  --surface-panel: #f3f5ef;
  --surface-elevated: #ffffff;
  --surface-inverse: #0c1e35;
  --surface-hover: #f3f4f6;
  --surface-active: #CAFF04;
  --surface-sidebar: #0c1e35;

  /* Text */
  --text-primary: #1a1a1a;
  --text-secondary: #6b7280;
  --text-muted: #9ca3af;
  --text-inverse: #ffffff;
  --text-on-accent: #0c1e35;
  --text-link: #0c1e35;
  --text-dark: #0c1e35;

  /* Borders */
  --border-subtle: #f3f4f6;
  --border-default: #e5e7eb;
  --border-strong: #d1d5db;
  --border-focus: #CAFF04;

  /* Actions */
  --action-primary-bg: #CAFF04;
  --action-primary-fg: #0c1e35;
  --action-primary-hover: #b8e600;
  --action-dark-bg: #0c1e35;
  --action-dark-fg: #ffffff;
  --action-dark-hover: #151d10;

  --brand-whatsapp-700: #075E54;
  --brand-whatsapp-500: #128C7E;
  --brand-whatsapp-400: #25D366;
  --brand-whatsapp-chat: #ECE5DD;
  --brand-whatsapp-bubble: #d9fdd3;
  --brand-whatsapp-input: #F0F0F0;
  --brand-note-bg: #FFF3C4;
  --brand-google-blue: #4285F4;
  --brand-google-green: #34A853;
  --brand-google-yellow: #FBBC05;
  --brand-google-red: #EA4335;
  --brand-yappy-1: #c8ee44;
  --brand-yappy-2: #a8d12f;
  --brand-stripe-1: #c8ee44;
  --brand-stripe-2: #a8d12f;
  --brand-wallet: #7B2BFC;

  /* Semantic States */
  --success: #10b981;
  --success-fg: #047857;
  --warning: #f59e0b;
  --warning-fg: #b45309;
  --error: #ef4444;
  --danger-fg: #b91c1c;
  --notification: #ef4444;

  /* Charts */
  --chart-line: #c8ee44;
  --chart-dot: #c8ee44;
  --chart-grid: #e5e7eb;
  --chart-fill: rgba(16, 185, 129, 0.08);

  /* Radius */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-pill: 9999px;
  --radius-circle: 50%;
  --radius-card: 16px;
  --radius-button: 12px;
  --radius-input: 12px;
  --radius-badge: 8px;

  /* Spacing */
  --space-card: 24px;

  /* Transitions */
  --transition-base: 150ms ease;
  --transition-spring: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Focus */
  --focus-ring: #c8ee44;
}

/* ============================================================
   Base Styles
   ============================================================ */

html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body {
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  font-weight: 400;
  line-height: 1.6;
  color: var(--text-secondary);
  background: var(--surface-page);
  background-attachment: fixed;
  min-height: 100vh;
}

/* ============================================================
   Typography Utilities
   ============================================================ */

.font-heading {
  font-family: var(--font-heading);
}

.font-body {
  font-family: var(--font-body);
}

.font-mono {
  font-family: var(--font-mono);
}

/* --- Dashboard Typography Scale --- */
.text-page-title {
  font-family: var(--font-heading);
  font-size: var(--type-heading-md);
  font-weight: 700;
  color: var(--text-primary);
  line-height: 1.3;
}

.text-section-heading {
  font-family: var(--font-heading);
  font-size: var(--type-body-md);
  font-weight: 600;
  color: var(--text-primary);
  line-height: 1.4;
}

.text-card-title {
  font-family: var(--font-heading);
  font-size: var(--type-body-sm);
  font-weight: 500;
  color: var(--text-primary);
  line-height: 1.4;
}

.text-nav-item {
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  font-weight: 500;
  line-height: 1.4;
}

.text-body {
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  font-weight: 400;
  color: var(--text-secondary);
  line-height: 1.6;
}

.text-timestamp {
  font-family: var(--font-body);
  font-size: var(--type-label-sm);
  font-weight: 400;
  color: var(--text-muted);
  line-height: 1.5;
}

.text-fine-print {
  font-family: var(--font-body);
  font-size: var(--type-label-sm);
  font-weight: 400;
  color: var(--text-muted);
  line-height: 1.4;
}

.text-chat-label {
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  font-weight: 600;
  color: var(--text-primary);
}

/* --- Marketing Typography Scale --- */
.text-display-lg {
  font-family: var(--font-heading);
  font-size: var(--type-display-lg);
  font-weight: 700;
  line-height: 1.1;
  letter-spacing: -0.02em;
  color: var(--text-primary);
}

.text-display-sm {
  font-family: var(--font-heading);
  font-size: var(--type-display-sm);
  font-weight: 700;
  line-height: 1.15;
  letter-spacing: -0.02em;
  color: var(--text-primary);
}

.text-heading-lg {
  font-family: var(--font-heading);
  font-size: var(--type-heading-lg);
  font-weight: 700;
  line-height: 1.25;
  letter-spacing: -0.01em;
  color: var(--text-primary);
}

.text-heading-md {
  font-family: var(--font-heading);
  font-size: var(--type-heading-md);
  font-weight: 600;
  line-height: 1.3;
  color: var(--text-primary);
}

.text-heading-sm {
  font-family: var(--font-heading);
  font-size: var(--type-heading-sm);
  font-weight: 600;
  line-height: 1.4;
  color: var(--text-primary);
}

/* ============================================================
   Readability Constraints (DESIGN_SYSTEM.md §4.3)
   ============================================================ */

.prose-marketing {
  max-width: 72ch;
}

.prose-docs {
  max-width: 80ch;
}

.prose-dashboard {
  max-width: 64ch;
}

/* ============================================================
   Card / Panel Components
   NO box-shadow default, borders only (DESIGN_SYSTEM.md §7)
   ============================================================ */

.card {
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-card);
  padding: var(--space-card);
  transition: border-color var(--transition-base), box-shadow var(--transition-base), transform var(--transition-base);
}

.card:hover {
  border-color: rgba(200, 238, 68, 0.45);
  box-shadow: 0 10px 24px rgba(10, 15, 7, 0.08);
  transform: translateY(-2px);
}

.card-nested {
  background: var(--surface-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  padding: var(--space-card);
}

.panel {
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-card);
  padding: var(--space-card);
}

/* ============================================================
   Button Components (COMPONENT_GUIDELINES.md §2)
   3 variants only: primary, secondary, tertiary
   ============================================================ */

.btn-primary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 24px;
  font-family: var(--font-heading);
  font-size: var(--type-body-sm);
  font-weight: 600;
  color: var(--action-primary-fg);
  background: var(--action-primary-bg);
  border: 1px solid rgba(202, 255, 4, 0.40);
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: background var(--transition-base);
}

.btn-primary:hover {
  background: var(--action-primary-hover);
}

.btn-primary:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

.btn-primary:disabled {
  opacity: 0.5;
  pointer-events: none;
}

.btn-secondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 24px;
  font-family: var(--font-heading);
  font-size: var(--type-body-sm);
  font-weight: 500;
  color: var(--text-primary);
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-button);
  cursor: pointer;
  transition:
    background var(--transition-base),
    border-color var(--transition-base);
}

.btn-secondary:hover {
  background: var(--surface-hover);
  border-color: var(--border-strong);
}

.btn-secondary:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

.btn-secondary:disabled {
  opacity: 0.5;
  pointer-events: none;
}

.btn-tertiary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 24px;
  font-family: var(--font-heading);
  font-size: var(--type-body-sm);
  font-weight: 500;
  color: var(--text-secondary);
  background: transparent;
  border: none;
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: background var(--transition-base), color var(--transition-base);
}

.btn-tertiary:hover {
  background: var(--surface-hover);
  color: var(--text-primary);
}

.btn-tertiary:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

.btn-tertiary:disabled {
  opacity: 0.5;
  pointer-events: none;
}

/* Send button (circular — dashboard only) */
.btn-send {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: var(--action-primary-bg);
  border: none;
  border-radius: var(--radius-circle);
  cursor: pointer;
  transition: background var(--transition-base);
  flex-shrink: 0;
}

.btn-send:hover {
  background: var(--action-primary-hover);
}

.btn-send:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
}

.btn-send svg {
  color: var(--text-on-accent);
}

/* ============================================================
   Input Components
   ============================================================ */

.input {
  width: 100%;
  padding: 12px 16px;
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  color: var(--text-primary);
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-input);
  transition:
    border-color var(--transition-base),
    box-shadow var(--transition-base);
}

.input::placeholder {
  color: var(--text-muted);
}

.input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-light);
}

.input:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.textarea {
  width: 100%;
  padding: 12px 16px;
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  color: var(--text-primary);
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-input);
  resize: vertical;
  min-height: 100px;
  transition:
    border-color var(--transition-base),
    box-shadow var(--transition-base);
}

.textarea::placeholder {
  color: var(--text-muted);
}

.textarea:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-light);
}

/* ============================================================
   Chat Components
   ============================================================ */

.chat-bubble {
  display: inline-block;
  max-width: 70%;
  padding: 12px 16px;
  background: var(--surface-panel);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
  font-size: var(--type-body-sm);
  line-height: 1.6;
  color: var(--text-secondary);
}

.chat-input-container {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-md);
}

.chat-input {
  flex: 1;
  padding: 8px 0;
  font-family: var(--font-body);
  font-size: var(--type-body-sm);
  color: var(--text-primary);
  background: transparent;
  border: none;
  outline: none;
}

.chat-input::placeholder {
  color: var(--text-muted);
}

/* ============================================================
   Sidebar Nav Item
   ============================================================ */

.nav-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 16px;
  font-size: var(--type-body-sm);
  font-weight: 500;
  color: rgba(255, 255, 255, 0.65);
  background: transparent;
  border: none;
  border-radius: var(--radius-button);
  cursor: pointer;
  transition:
    background var(--transition-base),
    color var(--transition-base);
  text-decoration: none;
}

.nav-item:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.9);
}

.nav-item.active {
  background: rgba(202, 255, 4, 0.10);
  color: var(--accent);
  font-weight: 600;
  border-left: 3px solid var(--accent);
}

.nav-item svg {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
}

/* ============================================================
   Pills / Tags
   ============================================================ */

.pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 16px;
  font-size: var(--type-body-sm);
  font-weight: 500;
  border-radius: var(--radius-pill);
  transition:
    background var(--transition-base),
    border-color var(--transition-base);
  white-space: nowrap;
}

.pill-default {
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  color: var(--text-secondary);
}

.pill-active {
  background: var(--accent);
  border: 1px solid var(--accent);
  color: var(--text-on-accent);
}

/* ============================================================
   Badge (COMPONENT_GUIDELINES.md §6)
   ============================================================ */

.badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 4px 8px;
  font-size: var(--type-label-sm);
  font-weight: 600;
  border-radius: var(--radius-badge);
  white-space: nowrap;
}

.badge-lime {
  background: rgba(202, 255, 4, 0.25);
  color: #3d5a00;
  border: 1px solid rgba(202, 255, 4, 0.40);
}

.badge-dark-blue {
  background: var(--color-info-bg);
  color: var(--dark-blue);
  border: 1px solid rgba(202, 255, 4, 0.45);
}

.badge-success {
  background: var(--color-success-bg);
  color: var(--success-fg);
  border: 1px solid rgba(16, 185, 129, 0.25);
}

.badge-error {
  background: var(--color-danger-bg);
  color: var(--danger-fg);
  border: 1px solid rgba(239, 68, 68, 0.25);
}

.badge-warning {
  background: var(--color-warning-bg);
  color: var(--warning-fg);
  border: 1px solid rgba(245, 158, 11, 0.25);
}

/* ============================================================
   Table Components
   ============================================================ */

.table-container {
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-card);
  overflow: hidden;
}

.table {
  width: 100%;
  border-collapse: collapse;
}

.table thead th {
  padding: 12px 16px;
  font-size: var(--type-label-sm);
  font-weight: 500;
  color: var(--text-muted);
  text-align: left;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--border-default);
}

.table tbody td {
  padding: 12px 16px;
  font-size: var(--type-body-sm);
  color: var(--text-secondary);
  border-bottom: 1px solid var(--border-subtle);
}

.table tbody tr:last-child td {
  border-bottom: none;
}

.table tbody tr:hover {
  background: var(--surface-panel);
}

/* ============================================================
   Progress Bar
   ============================================================ */

.progress-track {
  width: 100%;
  height: 6px;
  background: var(--border-default);
  border-radius: 3px;
  overflow: hidden;
}

.progress-fill {
  height: 100%;
  background: var(--chart-line);
  border-radius: 3px;
  transition: width 300ms ease;
}

/* ============================================================
   Modal
   ============================================================ */

.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.30);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
}

.modal-content {
  background: var(--surface-page);
  border: 1px solid var(--border-default);
  border-radius: var(--radius-card);
  padding: var(--space-card);
  max-width: 90vw;
  max-height: 90vh;
  overflow: auto;
}

/* ============================================================
   Layout Components
   ============================================================ */

.sidebar {
  width: 220px;
  background: var(--surface-sidebar);
  border-right: none;
  height: 100vh;
  overflow-y: auto;
}

.history-panel {
  width: 280px;
  background: var(--surface-history);
  border-left: 1px solid var(--border-default);
  height: 100vh;
  overflow-y: auto;
}

/* ============================================================
   Section Spacing (TEMPLATE_RULES.md)
   Desktop: 96px, Mobile: 64px
   ============================================================ */

.section-spacing {
  padding-top: var(--space-section-mobile);
  padding-bottom: var(--space-section-mobile);
}

@media (min-width: 640px) {
  .section-spacing {
    padding-top: var(--space-section-desktop);
    padding-bottom: var(--space-section-desktop);
  }
}

/* ============================================================
   Animation Utility Classes
   ============================================================ */

.animate-fade-in {
  animation: fade-in 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-slide-up {
  animation: slide-up 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.animate-scale-in {
  animation: scale-in 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}

/* Stagger delays */
.stagger-1 { animation-delay: 60ms; }
.stagger-2 { animation-delay: 120ms; }
.stagger-3 { animation-delay: 180ms; }
.stagger-4 { animation-delay: 240ms; }
.stagger-5 { animation-delay: 300ms; }
.stagger-6 { animation-delay: 360ms; }

/* ============================================================
   Miscellaneous Utilities
   ============================================================ */

/* Selection highlight */
::selection {
  background-color: var(--accent-light);
  color: var(--text-primary);
}

/* Focus ring for accessibility (UX_PRINCIPLES.md §5) */
.focus-ring:focus-visible {
  outline: 2px solid var(--focus-ring);
  outline-offset: 2px;
  border-radius: var(--radius-button);
}

/* Hide scrollbar but keep scrollable */
.no-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.no-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--border-strong);
  border-radius: var(--radius-pill);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-muted);
}

/* Divider */
.divider {
  height: 1px;
  background: var(--border-default);
}

.divider-light {
  height: 1px;
  background: var(--border-subtle);
}

/* Line clamp */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-3 {
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Link styles */
.link {
  color: var(--text-link);
  text-decoration: none;
  transition: opacity var(--transition-base);
}

.link:hover {
  opacity: 0.8;
}

/* Status dot */
.status-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.status-dot-success {
  background: var(--success);
}

.status-dot-error {
  background: var(--error);
}

.status-dot-warning {
  background: var(--warning);
}

.status-dot-notification {
  background: var(--notification);
}
